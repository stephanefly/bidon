{% extends 'trunks/main/base.html' %}
{% block content %}

<div class="text-center mb-4">
    <h2 class="fw-bold">Explorer <span class="text-primary">TRUNKS</span></h2>
    <p class="mt-3">Découvrez tous les projets et revues partagés.</p>
</div>

<div class="container-fluid">

    <!-- Études Perfos 0D -->
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header fw-bold"
             style="background: linear-gradient(90deg, #481449 0%, #8f4890 100%); color: white;">
            Toutes les études Perfos 0D
        </div>
        <div class="card-body">
            <table id="explore-projets-table" class="table table-bordered table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Nom</th>
                        <th>Propriétaire</th>
                        <th>Date création</th>
                    </tr>
                </thead>
                <tbody>
                {% for etat in lst_etats %}
                    <tr>
                        {% url 'lst_etats' as url %}
                        <td>
                            <a href="{% url 'info_etat' etat.id %}">{{ etat.name }}</a>

                        </td>
                        <td>{{ etat.projet.created_by }}</td>
                        <td>{{ etat.created_at|date:"d/m/Y H:i" }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="3" class="text-center">Aucun projet trouvé.</td></tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Revues Veines -->
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header fw-bold"
             style="background: linear-gradient(90deg, #481449 0%, #8f4890 100%); color: white;">
            Toutes les Revues Veines
        </div>
        <div class="card-body">
            <table id="explore-revues-veine-table" class="table table-bordered table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Nom</th>
                        <th>Propriétaire</th>
                        <th>Date création</th>
                    </tr>
                </thead>
                <tbody>
                {% for revue in explore_revues %}
                    <tr>
                        {% url 'lst_revue_veine' as url %}
                        <td>
                            <a href="{{ url }}/{{ revue.id }}">{{ revue.name }}</a>
                        </td>
                        <td>{{ revue.created_by }}</td>
                        <td>{{ revue.created_at|date:"d/m/Y H:i" }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="3" class="text-center">Aucune revue trouvée.</td></tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Revues Aubes -->
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header fw-bold"
             style="background: linear-gradient(90deg, #481449 0%, #8f4890 100%); color: white;">
            Toutes les Revues Aubes
        </div>
        <div class="card-body">
            <table id="explore-revues-aube-table" class="table table-bordered table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Nom</th>
                        <th>Propriétaire</th>
                        <th>Date création</th>
                    </tr>
                </thead>
                <tbody>
                {% for revue in revues_aube %}
                    <tr>
                        {% url 'lst_revue_aube' as url %}
                        <td>
                            <a href="{{ url }}/{{ revue.id }}">{{ revue.name }}</a>
                        </td>
                        <td>{{ revue.created_by }}</td>
                        <td>{{ revue.created_at|date:"d/m/Y H:i" }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="3" class="text-center">Aucune revue trouvée.</td></tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Projets SheRON -->
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header fw-bold"
             style="background: linear-gradient(90deg, #481449 0%, #8f4890 100%); color: white;">
            Tous les projets SheRON
        </div>
        <div class="card-body">
            <table id="explore-projets-shenron-table" class="table table-bordered table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Nom</th>
                        <th>Propriétaire</th>
                        <th>Date création</th>
                    </tr>
                </thead>
                <tbody>
                {% for projet in projets_shenron %}
                    <tr>
                        {% url 'lst_projets_shenron' as url %}
                        <td>
                            <a href="{{ url }}/{{ projet.id }}">{{ projet.name }}</a>
                        </td>
                        <td>{{ projet.created_by }}</td>
                        <td>{{ projet.created_at|date:"d/m/Y H:i" }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="3" class="text-center">Aucun projet trouvé.</td></tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>

<script>
$(document).ready(function () {
    $('#explore-projets-table').DataTable({
        language: {
            url: "//cdn.datatables.net/plug-ins/1.13.8/i18n/fr-FR.json"
        }
    });
    $('#explore-revues-veine-table').DataTable({
        language: {
            url: "//cdn.datatables.net/plug-ins/1.13.8/i18n/fr-FR.json"
        }
    });
    $('#explore-revues-aube-table').DataTable({
        language: {
            url: "//cdn.datatables.net/plug-ins/1.13.8/i18n/fr-FR.json"
        }
    });
    $('#explore-projets-shenron-table').DataTable({
        language: {
            url: "//cdn.datatables.net/plug-ins/1.13.8/i18n/fr-FR.json"
        }
    });
});
</script>

{% endblock %}
